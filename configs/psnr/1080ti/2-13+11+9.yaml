epoch: 2000
evalFreq: 2
testFreq: 20
gpus: 6
vRam: -1
wantsMore: false
dataset: fullDataset
repeat: 1 # duplicate images in one epoch
valDataset: clic/valid
batchSize: 3
model:
    type: Big
    target: psnr
    channel: 128
    k: [8192, 2048, 512]
    m: 2
    withGroup: false
    withAtt: true
    withDropout: false
    alias: false
    ema: -1.0
optim:
    type: Lamb
    params:
        lr: 2.5e-3
        weight_decay: 0.0
        use_nvlamb: true
# schdr:
#     type: MultiStepWarmUp
#     params:
#         milestones: [100, 800, 900] # manually divided by repeat
#         gamma: 0.1
schdr:
    type: CosineWarmRestart
    params:
        first_cycle_steps: 200 # match 10 * testFreq
        warmup_steps: 60
        gamma: 0.64
regSchdr:
    type: MultiStep
    params:
        initValue: 1.e-4
        gamma: 0.993
        stepInterval: 1
tempSchdr:
    type: MultiStep
    params:
        initValue: 1.
        gamma: 1.0
        stepInterval: 1
# regSchdr:
#     type: Jump
#     params:
#         initValue: 0.5
#         minValue: 1.e-20
#         gamma: 0.99 # 10.0 * (gamma ^ 500) = 0.01
#         stepInterval: 1
# regSchdr:
#     type: JumpAlter
#     params:
#         initValue: 1.0
#         minValue: 0.00000001
#         gamma: 0.6683439175686146 # 1.0 * (gamma ^ 30) = 1.e-7
#         stepInterval: 1
#         milestone: 600
#         valueAfterMilestone: 1.e-6
warmStart: tmp.ckpt # ckpt/3-14+12+10.ckpt
method: New
